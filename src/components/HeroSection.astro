---
import SideEye from './SideEye.astro';
import Navbar from './Navbar.astro';

const cards = [
  { name: 'Maya Brooks', title: 'Growth Marketer @ Open AI', country: 'united-states.png', flag: '/images/united-states.png', image: '/images/american-woman.png' },
  { name: 'Obinna Nwosu', title: 'CEO @ Abba Microfinance Bank', country: 'nigeria', flag: '/images/nigeria.png', image: '/images/nigerian-man.png' },
  { name: 'Aaliyah Jordan', title: 'Freelancer @ Upwork', country: 'united-kingdom', flag: '/images/united-kingdom.png', image: '/images/uk-woman.png' },
  { name: 'Titi Adebayo', title: 'Product Designer @ Paystack', country: 'nigeria', flag: '/images/nigeria.png', image: '/images/nigerian-woman.png' },
  { name: 'Caleb Wright', title: 'Software Developer @ Google', country: 'united-states', flag: '/images/united-states.png', image: '/images/american-man.png' },
  { name: 'Rohan Gupta', title: 'AI Engineer @ Meta', country: 'india', flag: '/images/india.png', image: '/images/indian-man.png' },
];
---

<section class="relative bg-black text-white overflow-hidden">
  <Navbar />

  <!-- ===== HERO CONTENT ===== -->
  <div class="relative mb-8 pt-10 z-10 grid grid-cols-1 lg:grid-cols-2">
    <!-- Left Column: Text -->
    <div class="px-6 lg:pl-24 lg:pr-0 py-12 lg:py-0 relative">
      <!-- Heading -->
    <div class="text-5xl md:text-6xl font-extrabold leading-[1.1] tracking-tight mb-6">
      <span>Stop Buying Courses You Never Finish</span>
      <span class="inline-block relative">
        <SideEye class="inline-flex w-15 h-15 align-middle mb-2" />
      </span>
    </div>

      <!-- Subtext -->
      <p class="text-gray-400 text-lg md:text-2xl leading-normal mb-10">
		Join live cohorts where real people learn together with real instructors. Build job-ready skills, whether you're chasing a full-time job, freelance gigs, or your own business.
      </p>

      <!-- Buttons -->
      <div class="flex flex-wrap items-center gap-4 mb-12">
        <a
          id="browse-courses-btn"
          href="#browse-courses"
          class="inline-flex items-center gap-2 bg-[#BB39B4] hover:bg-[#BB39B4] text-white font-semibold px-7 py-3.5 rounded-full transition-colors text-base"
        >
          Browse Courses
          <svg class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M5 12h14M12 5l7 7-7 7"/>
          </svg>
        </a>
        <a
          id="how-it-works-btn"
          href="#how-it-works"
          class="inline-flex items-center gap-2 border border-white/20 hover:border-white/40 text-white font-semibold px-7 py-3.5 rounded-full transition-colors text-base"
        >
          How it Works
        </a>
      </div>
    </div>

    <!-- Right Column: Marquee -->
    <div class="marquee-container relative h-125 lg:h-full overflow-hidden flex items-start!">
      <div class="marquee-track">
        <!-- First set of cards -->
        {cards.map((card) => (
          <div class="marquee-card relative rounded-2xl overflow-hidden shrink-0 w-70 h-110">
            <img
              src={card.image}
              alt={card.name}
              class="w-full h-full object-cover"
              loading="eager"
              fetchpriority="high"
            />
            <div class="absolute bottom-0 left-0 right-0 bg-linear-to-t from-black/80 via-black/40 to-transparent p-5 pt-16">
              <div class="flex flex-row items-center">
				{/* Name of Person */}
        {/* <p class="text-white font-semibold text-base">
					{card.name}
				</p> */}
				<img
				src={card.flag}
				alt={card.country}
				class="ml-1 h-6 w-auto"
        loading="eager"
        fetchpriority="high"
				/>
			</div>
              {/* Name of Workplace */}
              {/* <p class="text-gray-300 text-sm mt-0.5">{card.title}</p> */}
            </div>
          </div>
        ))}
        <!-- Duplicate set for seamless loop -->
        {cards.map((card) => (
          <div class="marquee-card relative rounded-2xl overflow-hidden shrink-0 w-70 h-110">
            <img
              src={card.image}
              alt={card.name}
              class="w-full h-full object-cover"
              loading="eager"
              fetchpriority="high"
            />
            <div class="absolute bottom-0 left-0 right-0 bg-linear-to-t from-black/80 via-black/40 to-transparent p-5 pt-16">
              <div class="flex flex-row items-center">
        {/* Name of Person */}
				{/* <p class="text-white font-semibold text-base">
					{card.name}
				</p> */}
				<img
				src={card.flag}
				alt={card.country}
				class="ml-1 h-6 w-auto"
        loading="eager"
        fetchpriority="high"
				/>
			</div>
              {/* Name of Workplace */}
              {/* <p class="text-gray-300 text-sm mt-0.5">{card.title}</p> */}
            </div>
          </div>
        ))}
      </div>
    </div>
  </div>
</section>

<style>
  /* Marquee container with fade mask */
  .marquee-container {
    -webkit-mask-image: linear-gradient(90deg, #0000 0%, #000 70% 75%, #0000 100%);
    mask-image: linear-gradient(90deg, #0000 0%, #000 70% 75%, #0000 100%);
    display: flex;
    align-items: center;
  }

  /* The scrolling track */
  .marquee-track {
    display: flex;
    gap: 1.25rem;
    animation: marquee-scroll 40s linear infinite;
    width: max-content;
  }

  /* Keyframes: slide the entire track left by exactly one set width */
  @keyframes marquee-scroll {
    0% {
      transform: translateX(0);
    }
    100% {
      /* 6 cards Ã— (280px + 20px gap) = 1800px */
      transform: translateX(-1800px);
    }
  }

  /* Pause on hover for accessibility */
  /* .marquee-container:hover .marquee-track {
    animation-play-state: paused;
  } */
</style>

<script is:inline>
  function initHeroTracking() {
    const browseCoursesBtn = document.getElementById('browse-courses-btn');
    const howItWorksBtn = document.getElementById('how-it-works-btn');

    browseCoursesBtn?.addEventListener('click', () => {
      window.posthog?.capture('browse_courses_clicked', {
        location: 'hero_section'
      });
    });

    howItWorksBtn?.addEventListener('click', () => {
      window.posthog?.capture('how_it_works_clicked', {
        location: 'hero_section'
      });
    });
  }

  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initHeroTracking);
  } else {
    initHeroTracking();
  }
</script>
